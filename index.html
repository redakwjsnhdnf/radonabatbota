<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Character Engine: The Blue Muse</title>
    <style>
        body { margin: 0; overflow: hidden; background: #0a0510; cursor: crosshair; }
        canvas { display: block; filter: contrast(1.1) brightness(1.1); }
        #ui {
            position: absolute; bottom: 30px; width: 100%; text-align: center;
            font-family: 'Georgia', serif; color: #ffccff; letter-spacing: 3px;
            text-shadow: 0 0 10px #ff00ff; pointer-events: none;
        }
    </style>
</head>
<body>

<div id="ui">CHAR_CODE: BLUE_STAR_MUSE</div>
<canvas id="stage"></canvas>

<script>
const canvas = document.getElementById('stage');
const ctx = canvas.getContext('2d');
let w = canvas.width = window.innerWidth;
let h = canvas.height = window.innerHeight;

let frame = 0;
const mouse = { x: w/2, y: h/2 };

// --- نظام الإضاءة (Dynamic Rim Lighting) ---
function applyGlow(color, blur) {
    ctx.shadowBlur = blur;
    ctx.shadowColor = color;
}

// --- رسم ملامح الشخصية بالدقة الكاملة ---
function drawCharacter(x, y) {
    let breathe = Math.sin(frame * 0.04) * 5;
    let sway = Math.sin(frame * 0.02) * 0.02;

    ctx.save();
    ctx.translate(x, y + breathe);
    ctx.rotate(sway);

    // 1. الساقين والجوارب (Asymmetric Socks)
    // الساق اليمنى (جوارب بنفسجية منقطة)
    ctx.fillStyle = "#222"; ctx.fillRect(10, 110, 20, 50); // الحذاء
    ctx.fillStyle = "#d8b4fe"; ctx.fillRect(10, 70, 20, 40); // الجورب
    ctx.fillStyle = "#fff"; ctx.beginPath(); ctx.arc(15, 80, 3, 0, Math.PI*2); ctx.fill(); // نقط

    // الساق اليسرى (جوارب بيضاء مع ربطة)
    ctx.fillStyle = "#222"; ctx.fillRect(-30, 110, 20, 50);
    ctx.fillStyle = "#fff"; ctx.fillRect(-30, 70, 20, 40);
    ctx.fillStyle = "#9d174d"; ctx.beginPath(); ctx.arc(-20, 75, 4, 0, Math.PI*2); ctx.fill(); // الربطة

    // 2. الفستان (The Pink Dress)
    ctx.fillStyle = "#fbcfe8"; // وردي فاتح
    ctx.beginPath();
    ctx.moveTo(-40, 0);
    ctx.bezierCurveTo(-60, 80, 60, 80, 40, 0);
    ctx.fill();
    // العيون اللي فالفستان (Design)
    ctx.fillStyle = "#fff";
    ctx.beginPath(); ctx.ellipse(-25, 50, 8, 12, 0, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.ellipse(25, 50, 8, 12, 0, 0, Math.PI*2); ctx.fill();
    ctx.fillStyle = "#000";
    ctx.beginPath(); ctx.circle = ctx.arc(-25, 50, 4, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.circle = ctx.arc(25, 50, 4, 0, Math.PI*2); ctx.fill();

    // 3. الأكمام والسترة (Purple Jacket)
    ctx.fillStyle = "#86198f"; // أرجواني غامق
    ctx.beginPath(); // سترة
    ctx.moveTo(-35, -30); ctx.lineTo(35, -30); ctx.lineTo(45, 10); ctx.lineTo(-45, 10); ctx.closePath(); ctx.fill();
    
    // الأكمام المنفوخة (Puffy Sleeves)
    ctx.fillStyle = "#fff";
    ctx.beginPath(); ctx.ellipse(-45, -20, 15, 20, 0.5, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.ellipse(45, -20, 15, 20, -0.5, 0, Math.PI*2); ctx.fill();

    // 4. الرأس والشعر (Blue Hair)
    ctx.save();
    let hairSway = Math.sin(frame * 0.05) * 3;
    ctx.fillStyle = "#93c5fd"; // أزرق سماوي
    // رسم الشعر قطعة بقطعة (Hand-drawn style)
    ctx.beginPath();
    ctx.moveTo(-55, -30);
    ctx.bezierCurveTo(-70, -100, 70, -100, 55, -30);
    ctx.lineTo(60 + hairSway, 10);
    ctx.lineTo(-60 - hairSway, 10);
    ctx.fill();

    // الوجه
    ctx.fillStyle = "#fff5f0"; // بشرة فاتحة
    ctx.beginPath();
    ctx.ellipse(0, -35, 45, 40, 0, 0, Math.PI*2);
    ctx.fill();

    // العيون (The Large Blue Eyes)
    applyGlow("#0ff", 10);
    ctx.fillStyle = "#fff";
    ctx.beginPath(); ctx.ellipse(-18, -35, 14, 16, 0, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.ellipse(18, -35, 14, 16, 0, 0, Math.PI*2); ctx.fill();
    
    ctx.fillStyle = "#60a5fa"; // بؤبؤ أزرق
    ctx.beginPath(); ctx.arc(-18, -35, 8, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(18, -35, 8, 0, Math.PI*2); ctx.fill();
    
    ctx.shadowBlur = 0;

    // النجوم ف الأذنين (Star Earrings)
    ctx.fillStyle = "#fbbf24";
    const drawStar = (cx, cy) => {
        ctx.beginPath();
        for(let i=0; i<5; i++) {
            ctx.lineTo(cx + Math.cos(i*1.2)*8, cy + Math.sin(i*1.2)*8);
        }
        ctx.fill();
    };
    drawStar(-48, -20); drawStar(48, -20);

    // 5. القبعة (The Top Hat)
    ctx.translate(0, -80);
    ctx.rotate(-0.1);
    ctx.fillStyle = "#701a75";
    ctx.fillRect(-35, 0, 70, 45); // القبعة
    ctx.fillStyle = "#fbbf24"; ctx.fillRect(-35, 30, 70, 8); // الشريط الذهبي
    ctx.fillStyle = "#701a75"; ctx.fillRect(-45, 38, 90, 8); // حافة القبعة
    
    ctx.restore();
    ctx.restore();
}

function drawBackground() {
    // خلفية سحرية (Magic Particles)
    for(let i=0; i<30; i++) {
        let x = (Math.sin(i*555) * w + frame) % w;
        let y = (Math.cos(i*555) * h) % h;
        ctx.fillStyle = "rgba(255, 100, 255, 0.3)";
        ctx.beginPath(); ctx.arc(x, y, Math.random()*3, 0, Math.PI*2); ctx.fill();
    }
}

function render() {
    // مسح مع أثر خفيف
    ctx.fillStyle = "rgba(10, 5, 16, 0.2)";
    ctx.fillRect(0, 0, w, h);

    drawBackground();
    
    // إضاءة تتبع الماوس
    let g = ctx.createRadialGradient(mouse.x, mouse.y, 0, mouse.x, mouse.y, 400);
    g.addColorStop(0, "rgba(255, 0, 255, 0.1)");
    g.addColorStop(1, "transparent");
    ctx.fillStyle = g;
    ctx.fillRect(0,0,w,h);

    drawCharacter(w/2, h/2 + 50);

    frame++;
    requestAnimationFrame(render);
}

window.onmousemove = e => { mouse.x = e.clientX; mouse.y = e.clientY; };
render();
</script>
</body>
</html>
