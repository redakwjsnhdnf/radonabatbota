<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>REDA MEGA PROJECT - 3D MODELS</title>
    <style>
        body { margin: 0; overflow: hidden; background: #111; font-family: sans-serif; }
        #gui { position: absolute; top: 10px; left: 10px; color: white; background: rgba(0,0,0,0.7); padding: 15px; border-radius: 10px; border: 2px solid #00f2ff; }
        .skin-btn { background: #00f2ff; border: none; padding: 5px 10px; cursor: pointer; margin-top: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <div id="gui">
        <b>REDA AVATAR SYSTEM</b><br>
        التحكم: WASD + Space<br>
        تغيير السكين:<br>
        <button class="skin-btn" onclick="changeSkin(0xff0000)">الأحمر القتالي</button><br>
        <button class="skin-btn" onclick="changeSkin(0x00ff00)">الأخضر السام</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, player, bodyParts = [];

        window.onload = () => {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x131313);
            camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            scene.add(new THREE.HemisphereLight(0xffffff, 0x444444, 1));
            scene.add(new THREE.GridHelper(100, 20, 0x00f2ff, 0x222222));

            // --- بناء الشخصية (Roblox Style Humanoid) ---
            player = new THREE.Group();
            
            const mat = new THREE.MeshPhongMaterial({color: 0x00f2ff});
            
            // الرأس
            const head = new THREE.Mesh(new THREE.BoxGeometry(0.4, 0.4, 0.4), mat);
            head.position.y = 1.7;
            player.add(head);

            // الجذع (Torso)
            const torso = new THREE.Mesh(new THREE.BoxGeometry(0.6, 0.8, 0.3), mat);
            torso.position.y = 1.1;
            player.add(torso);

            // اليدين
            const armL = new THREE.Mesh(new THREE.BoxGeometry(0.2, 0.7, 0.2), mat);
            armL.position.set(0.45, 1.1, 0);
            player.add(armL);

            const armR = new THREE.Mesh(new THREE.BoxGeometry(0.2, 0.7, 0.2), mat);
            armR.position.set(-0.45, 1.1, 0);
            player.add(armR);

            // الرجلين
            const legL = new THREE.Mesh(new THREE.BoxGeometry(0.25, 0.7, 0.25), mat);
            legL.position.set(0.15, 0.35, 0);
            player.add(legL);

            const legR = new THREE.Mesh(new THREE.BoxGeometry(0.25, 0.7, 0.25), mat);
            legR.position.set(-0.15, 0.35, 0);
            player.add(legR);

            bodyParts = [head, torso, armL, armR, legL, legR];
            scene.add(player);

            // تحريك الأطراف عند المشي
            let walkTime = 0;
            const keys = {};
            window.onkeydown = (e) => keys[e.code] = true;
            window.onkeyup = (e) => keys[e.code] = false;

            window.changeSkin = (color) => {
                bodyParts.forEach(p => p.material.color.setHex(color));
            };

            function animate() {
                requestAnimationFrame(animate);
                
                let isMoving = false;
                if(keys['KeyW']) { player.translateZ(-0.1); isMoving = true; }
                if(keys['KeyS']) { player.translateZ(0.1); isMoving = true; }
                if(keys['KeyA']) player.rotation.y += 0.05;
                if(keys['KeyD']) player.rotation.y -= 0.05;

                // تحريك اليدين والرجلين (Animation Logic)
                if(isMoving) {
                    walkTime += 0.2;
                    armL.rotation.x = Math.sin(walkTime) * 0.5;
                    armR.rotation.x = -Math.sin(walkTime) * 0.5;
                    legL.rotation.x = -Math.sin(walkTime) * 0.5;
                    legR.rotation.x = Math.sin(walkTime) * 0.5;
                } else {
                    bodyParts.forEach(p => p.rotation.x = 0);
                }

                camera.position.lerp(new THREE.Vector3(0, 5, 10).applyMatrix4(player.matrixWorld), 0.1);
                camera.lookAt(player.position.x, player.position.y + 1, player.position.z);
                renderer.render(scene, camera);
            }
            animate();
        };
    </script>
</body>
</html>
