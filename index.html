<!DOCTYPE html>
<html>
<head>
    <title>REDA | NEON VORTEX</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Courier New', monospace; }
        #ui { position: absolute; top: 20px; left: 20px; color: #0ff; text-shadow: 0 0 10px #0ff; pointer-events: none; }
    </style>
</head>
<body>
    <div id="ui"><h1>NEON VORTEX</h1><p id="score">DISTANCE: 0m</p></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, tube, binormal = new THREE.Vector3(), normal = new THREE.Vector3();
        let score = 0;

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            // إنشاء مسار الأنفاق بشكل منحني (Spline)
            const points = [];
            for (let i = 0; i < 100; i++) {
                points.push(new THREE.Vector3(Math.sin(i * 0.2) * 5, Math.cos(i * 0.2) * 5, i * 10));
            }
            const path = new THREE.CatmullRomCurve3(points);

            // هندسة الأنبوب مع مادة مضيئة
            const tubeGeo = new THREE.TubeGeometry(path, 200, 2, 20, false);
            const tubeMat = new THREE.MeshBasicMaterial({ 
                color: 0x00ffff, wireframe: true, side: THREE.DoubleSide 
            });
            tube = new THREE.Mesh(tubeGeo, tubeMat);
            scene.add(tube);

            // إضافة إضاءة محيطة
            const pLight = new THREE.PointLight(0xff00ff, 1, 100);
            scene.add(pLight);

            animate();
        }

        let percentage = 0;
        function animate() {
            requestAnimationFrame(animate);
            percentage += 0.0005; // السرعة
            score += 1;

            const p1 = tube.geometry.parameters.path.getPointAt(percentage % 1);
            const p2 = tube.geometry.parameters.path.getPointAt((percentage + 0.01) % 1);
            
            camera.position.set(p1.x, p1.y, p1.z);
            camera.lookAt(p2);

            // تغيير الألوان بشكل مبهر مع الحركة
            tube.material.color.setHSL((percentage * 5) % 1, 1, 0.5);
            document.getElementById('score').innerText = "DISTANCE: " + score + "m";

            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        init();
    </script>
</body>
</html>
